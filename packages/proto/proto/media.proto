syntax = "proto3";

package media;

service MediaService {
    rpc GetPresignedUrl (GetPresignedUrlRequest) returns (GetPresignedUrlResponse);
    rpc MediaUploaded (MediaUploadedRequest) returns (MediaUploadedResponse);
    rpc CollectionQuery (CollectionQueryRequest) returns (stream CollectionQueryResponse);
    rpc DeleteCollection (DeleteCollectionRequest) returns (DeleteCollectionResponse);
}

message DeleteCollectionRequest {
    string authorId = 1;
    string collectionId = 3;
}

message Collection {
    string id = 1;
}

message DeleteCollectionResponse {
    string message = 1;
    Collection collection = 2;
}

message GetPresignedUrlRequest {
    string fileName = 1;
    string fileType = 2;
}

message GetPresignedUrlResponse {
    string url = 1;
    string message = 2;
}

message MediaUploadedRequest {
    string fileName = 1;
    string authorId = 2;
}

message MediaUploadedResponse {
    string message = 2;
}

message CollectionQueryRequest {
    string query= 1;
    string collectionId= 2;
    string authorId=3;
    optional string chatId=4;
}

message CollectionQueryResponse {
  string jsonData = 1;
}
